(function(e,t){'object'==typeof exports&&'object'==typeof module?module.exports=t():'function'==typeof define&&define.amd?define('GeoJsonEditor',[],t):'object'==typeof exports?exports.GeoJsonEditor=t():e.GeoJsonEditor=t()})('undefined'==typeof self?this:self,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(n,'a',n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='./',t(t.s=26)}([function(e){e.exports=require('react')},function(e){e.exports=require('prop-types')},function(e,t,n){'use strict';function o({googleMapURL:e,children:t,center:n,zoom:o,height:r,width:a}){return Object(h.createElement)(v,{scriptUrl:e},Object(h.createElement)(S,{center:n,zoom:o,height:r,width:a},t))}function r({google:e,children:t,center:n,zoom:o,height:r,width:a}){return Object(h.createElement)(L.Provider,{value:e},Object(h.createElement)(S,{center:n,zoom:o,height:r,width:a},t))}function a(e){return Array.isArray(e)?e:Array.from(e)}function i(e){var t=a(e);const n=t[0],o=t.slice(1);let r=n,d=R()(n);for(let t=0;t<o.length;t+=1){const e=R()(o[t]);d<e&&(r=o[t],d=e)}return r}function d(e){const t=i(e),n=e.filter((e)=>e!==t).reduce(T.a,t);return n}function s(e){return Array.isArray(e)?e:Array.from(e)}function l(e,t,{google:n}){const o=new n.maps.Data.Polygon(e.getPaths().getArray().map((e)=>e.getArray())),r=new n.maps.Data.Feature({geometry:o});return r.toGeoJson(t)}function g(e,t){return new Promise((n)=>l(e,n,t))}function p(e,t){return Promise.all(e.map((e)=>g(e,t)))}function c(e,{google:t}){if(!e)return null;const n=new t.maps.Data;return n.addGeoJson(e),n}function u(e,{google:t}){var n=e.getArray(),o=s(n);const r=o[0],a=o.slice(1),i=Object(x.c)(t,r),d=new t.maps.Polygon({paths:[r.getArray(),...a.map((e)=>i&&Object(x.c)(t,e)?e.getArray().reverse.call([...e.getArray()]):e.getArray())],editable:!1,clickable:!0});return d}function _(e,t){let n=[];return e.forEach((e)=>{const o=e.getGeometry();let r=[];switch(o.getType()){case'MultiPolygon':r=o.getArray().map((e)=>u(e,t));break;case'Polygon':r=[u(o,t)];break;default:r=[];}n=[...n,...r]}),n}function m(e,t){const n=c(e,t);var o=_(n,t),r=j(o,1);const a=r[0];return a}function y(e,t,{google:n}){const o=new n.maps.Data;o.add(new n.maps.Data.Feature({geometry:new n.maps.Data.MultiPolygon(e.map((e)=>e.getPaths().getArray().map((e)=>e.getArray())))}));const r=e.reduce((e,t)=>{var o=t.getPaths().getArray().map((e)=>e.getArray()),r=j(o,1);const a=r[0],i=n.maps.geometry.spherical.computeArea(a);return e+i},0);return o.toGeoJson((e)=>{'function'==typeof t&&t({geojson:e,totalArea:r})})}function f(e,t){return new Promise((n)=>y(e,n,t))}var h=n(0),b=n.n(h),w=n(1),P=n.n(w),x=n(5);const E='NONE',C='LOADED',L=b.a.createContext(null);class v extends h.Component{constructor(e){super(e),Object.defineProperty(this,'state',{enumerable:!0,writable:!0,value:{loadingState:E,google:null}}),Object.defineProperty(this,'isUnmounted',{enumerable:!0,writable:!0,value:!1}),this.handleLoaded=this.handleLoaded.bind(this)}componentDidMount(){const e=this.props.scriptUrl,t=this.state.loadingState;t!==E||this.setState({loadingState:'BEGIN'},()=>{Object(x.b)(e,()=>this.handleLoaded(google))})}componentWillUnmount(){this.isUnmounted=!0}handleLoaded(e){this.isUnmounted||this.setState({google:e,loadingState:C})}render(){var e=this.state;const t=e.google,n=e.loadingState;return n===C?t?Object(h.createElement)(L.Provider,{value:t},this.props.children):Object(h.createElement)('div',null,' Error Loading Script '):Object(h.createElement)('div',null,' Loading ... ')}}v.propTypes={children:P.a.node.isRequired,scriptUrl:P.a.string.isRequired};const A=b.a.createContext({google:null,map:null});class S extends h.Component{constructor(e,t){if(super(e,t),Object.defineProperty(this,'state',{enumerable:!0,writable:!0,value:{google:null,map:null}}),!t)throw new Error('No google object found, please make sure you have loaded google map script');this.mapElement=b.a.createRef()}componentDidMount(){var e=this.props;const t=e.center,n=e.zoom,o=this.context,r=new o.maps.Map(this.mapElement.current,{center:t,zoom:n,fullscreenControl:!1,streetViewControl:!1,mapTypeControlOptions:{style:o.maps.MapTypeControlStyle.DROPDOWN_MENU}});this.setState({google:o,map:r})}componentDidUpdate(e){const t=this.props.center;e.center!==t&&this.state.map.setCenter(t)}render(){var e=this.props;const t=e.width,n=e.height,o=this.state.map;return Object(h.createElement)('div',{style:{width:t,height:n},ref:this.mapElement},o?Object(h.createElement)(A.Provider,{value:this.state},this.props.children):null)}}Object.defineProperty(S,'contextType',{enumerable:!0,writable:!0,value:L}),S.propTypes={center:P.a.shape({lat:P.a.number,lng:P.a.number}).isRequired,children:P.a.node.isRequired,height:P.a.number.isRequired,width:P.a.oneOfType([P.a.string,P.a.number]).isRequired,zoom:P.a.number.isRequired};o.propTypes={googleMapURL:P.a.string.isRequired,children:P.a.node.isRequired,center:P.a.shape({lat:P.a.number,lng:P.a.number}).isRequired,height:P.a.number.isRequired,width:P.a.oneOfType([P.a.string,P.a.number]),zoom:P.a.number},r.propTypes={google:P.a.object.isRequired,children:P.a.node.isRequired,center:P.a.shape({lat:P.a.number,lng:P.a.number}).isRequired,height:P.a.number.isRequired,width:P.a.oneOfType([P.a.string,P.a.number]),zoom:P.a.number};const M={width:'100%',zoom:5};o.defaultProps=M,r.defaultProps=M;var O=n(19),T=n.n(O),D=n(20),R=n.n(D),j=function(){function e(e,t){var n=[],o=!0,r=!1,a=void 0;try{for(var i,d=e[Symbol.iterator]();!(o=(i=d.next()).done)&&(n.push(i.value),!(t&&n.length===t));o=!0);}catch(e){r=!0,a=e}finally{try{!o&&d['return']&&d['return']()}finally{if(r)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}(),N=n(6);const I=b.a.createContext({gmapData:null,newPolygonList:[],polygonList:[],selectedPolygonList:[],addNewPolygon:null,selectPolygon:null,unSelectPolygon:null,addAction:null,subtractAction:null,deleteAction:null,centerAction:null,discardChanges:null,persistChanges:null});class k extends h.Component{constructor(e,t){super(e,t),this.addNewPolygon=this.addNewPolygon.bind(this),this.selectPolygon=this.selectPolygon.bind(this),this.unSelectPolygon=this.unSelectPolygon.bind(this),this.subtractAction=this.subtractAction.bind(this),this.deleteAction=this.deleteAction.bind(this),this.discardChanges=this.discardChanges.bind(this),this.persistChanges=this.persistChanges.bind(this);const n=e.initialGeojson?c(e.initialGeojson,t):null;this.state={gmapData:n,newPolygonList:[],polygonList:n?_(n,t):[],selectedPolygonList:[],addNewPolygon:this.addNewPolygon,selectPolygon:this.selectPolygon,unSelectPolygon:this.unSelectPolygon,addAction:null,subtractAction:this.subtractAction,deleteAction:this.deleteAction,centerAction:null,discardChanges:this.discardChanges,persistChanges:this.persistChanges}}componentDidUpdate(e){const t=this.props.initialGeojson;if(e.initialGeojson!==t){const e=t?c(t,this.context):null;this.setState({gmapData:e,newPolygonList:[],polygonList:e?_(e,this.context):[],selectedPolygonList:[]})}}addNewPolygon(e){this.setState((t)=>({newPolygonList:[...t.newPolygonList,e],selectedPolygonList:[...t.selectedPolygonList,e]}))}selectPolygon(e){this.setState((t)=>({selectedPolygonList:[...t.selectedPolygonList,e]}))}unSelectPolygon(e){this.setState((t)=>({selectedPolygonList:t.selectedPolygonList.filter((t)=>t!==e)}))}subtractAction(){p(this.state.selectedPolygonList,this.context).then((e)=>d(e)).then((e)=>m(e,this.context)).then((e)=>{this.setState((t)=>({newPolygonList:[...t.newPolygonList.filter((e)=>!t.selectedPolygonList.includes(e)),e],polygonList:t.polygonList.filter((e)=>!t.selectedPolygonList.includes(e)),selectedPolygonList:[]}))})}deleteAction(){this.setState((e)=>({newPolygonList:e.newPolygonList.filter((t)=>!e.selectedPolygonList.includes(t)),polygonList:e.polygonList.filter((t)=>!e.selectedPolygonList.includes(t)),selectedPolygonList:[]}))}discardChanges(e,t){this.setState((e)=>({newPolygonList:[],polygonList:e.gmapData?_(e.gmapData,this.context):[],selectedPolygonList:[]}),t)}persistChanges(e,t){f([...this.state.newPolygonList,...this.state.polygonList],this.context).then(({geojson:e,totalArea:n})=>{t(),this.props.onSave(e,n)})}render(){return Object(h.createElement)(I.Provider,{value:this.state},this.props.children)}}Object.defineProperty(k,'contextType',{enumerable:!0,writable:!0,value:A});k.propTypes={children:P.a.node.isRequired,initialGeojson:N.c,onSave:P.a.func},k.defaultProps={initialGeojson:null,onSave:()=>{}},n.d(t,!1,function(){return v}),n.d(t,!1,function(){return S}),n.d(t,'b',function(){return A}),n.d(t,'a',function(){return r}),n.d(t,'c',function(){return o}),n.d(t,'e',function(){return k}),n.d(t,'d',function(){return I})},function(e){function t(e,t){var o=e[1]||'',r=e[3];if(!r)return o;if(t&&'function'==typeof btoa){var a=n(r),i=r.sources.map(function(e){return'/*# sourceURL='+r.sourceRoot+e+' */'});return[o].concat(i).concat([a]).join('\n')}return[o].join('\n')}function n(e){var t=btoa(unescape(encodeURIComponent(JSON.stringify(e))));return'/*# '+('sourceMappingURL=data:application/json;charset=utf-8;base64,'+t)+' */'}e.exports=function(e){var n=[];return n.toString=function(){return this.map(function(n){var o=t(n,e);return n[2]?'@media '+n[2]+'{'+o+'}':o}).join('')},n.i=function(e,t){'string'==typeof e&&(e=[[null,e,'']]);for(var o,r={},a=0;a<this.length;a++)o=this[a][0],'number'==typeof o&&(r[o]=!0);for(a=0;a<e.length;a++){var i=e[a];'number'==typeof i[0]&&r[i[0]]||(t&&!i[2]?i[2]=t:t&&(i[2]='('+i[2]+') and ('+t+')'),n.push(i))}},n}},function(e,t,n){function o(e,t){for(var n=0;n<e.length;n++){var o=e[n],r=_[o.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](o.parts[a]);for(;a<o.parts.length;a++)r.parts.push(p(o.parts[a],t))}else{for(var i=[],a=0;a<o.parts.length;a++)i.push(p(o.parts[a],t));_[o.id]={id:o.id,refs:1,parts:i}}}}function r(e,t){for(var n=[],o={},r=0;r<e.length;r++){var a=e[r],i=t.base?a[0]+t.base:a[0],d=a[1],s=a[2],l=a[3],p={css:d,media:s,sourceMap:l};o[i]?o[i].parts.push(p):n.push(o[i]={id:i,parts:[p]})}return n}function a(e,t){var n=f(e.insertInto);if(!n)throw new Error('Couldn\'t find a style target. This probably means that the value for the \'insertInto\' parameter is invalid.');var o=w[w.length-1];if('top'===e.insertAt)o?o.nextSibling?n.insertBefore(t,o.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),w.push(t);else if('bottom'===e.insertAt)n.appendChild(t);else if('object'==typeof e.insertAt&&e.insertAt.before){var r=f(e.insertInto+' '+e.insertAt.before);n.insertBefore(t,r)}else throw new Error('[Style Loader]\n\n Invalid value for parameter \'insertAt\' (\'options.insertAt\') found.\n Must be \'top\', \'bottom\', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n')}function i(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=w.indexOf(e);0<=t&&w.splice(t,1)}function d(e){var t=document.createElement('style');return e.attrs.type='text/css',l(t,e.attrs),a(e,t),t}function s(e){var t=document.createElement('link');return e.attrs.type='text/css',e.attrs.rel='stylesheet',l(t,e.attrs),a(e,t),t}function l(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function p(e,t){var n,o,r,a;if(t.transform&&e.css)if(a=t.transform(e.css),a)e.css=a;else return function(){};if(t.singleton){var l=b++;n=h||(h=d(t)),o=g.bind(null,n,l,!1),r=g.bind(null,n,l,!0)}else e.sourceMap&&'function'==typeof URL&&'function'==typeof URL.createObjectURL&&'function'==typeof URL.revokeObjectURL&&'function'==typeof Blob&&'function'==typeof btoa?(n=s(t),o=u.bind(null,n,t),r=function(){i(n),n.href&&URL.revokeObjectURL(n.href)}):(n=d(t),o=c.bind(null,n),r=function(){i(n)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}function g(e,t,n,o){var r=n?'':o.css;if(e.styleSheet)e.styleSheet.cssText=x(t,r);else{var a=document.createTextNode(r),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}function c(e,t){var n=t.css,o=t.media;if(o&&e.setAttribute('media',o),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function u(e,t,n){var o=n.css,r=n.sourceMap,a=t.convertToAbsoluteUrls===void 0&&r;(t.convertToAbsoluteUrls||a)&&(o=P(o)),r&&(o+='\n/*# sourceMappingURL=data:application/json;base64,'+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+' */');var i=new Blob([o],{type:'text/css'}),d=e.href;e.href=URL.createObjectURL(i),d&&URL.revokeObjectURL(d)}var _={},m=function(e){var t;return function(){return'undefined'==typeof t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),y=function(e){return document.querySelector(e)},f=function(){var e={};return function(t){if('function'==typeof t)return t();if('undefined'==typeof e[t]){var n=y.call(this,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),h=null,b=0,w=[],P=n(9);e.exports=function(e,t){if('undefined'!=typeof DEBUG&&DEBUG&&'object'!=typeof document)throw new Error('The style-loader cannot be used in a non-browser environment');t=t||{},t.attrs='object'==typeof t.attrs?t.attrs:{},t.singleton||'boolean'==typeof t.singleton||(t.singleton=m()),t.insertInto||(t.insertInto='head'),t.insertAt||(t.insertAt='bottom');var n=r(e,t);return o(n,t),function(e){for(var a=[],d=0;d<n.length;d++){var i=n[d],s=_[i.id];s.refs--,a.push(s)}if(e){var l=r(e,t);o(l,t)}for(var s,d=0;d<a.length;d++)if(s=a[d],0===s.refs){for(var p=0;p<s.parts.length;p++)s.parts[p]();delete _[s.id]}}};var x=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join('\n')}}()},function(e,t,n){'use strict';t.c=function(e,t){const n=t.getArray(),o=e.maps.geometry.spherical.computeSignedArea(n);return 0<o},t.b=function(e,t,n){try{r()(e,t)}catch(e){n(e)}};var o=n(18),r=n.n(o);t.a={CREATE:'CREATE',EDIT:'EDIT',VIEW:'VIEW',DELETE:'DELETE'}},function(e,t){'use strict';t.a=function(e,t,n){return e[t]instanceof google.maps.Data?null:null===e[t]?null:new Error(`Invalid prop \`${t}\` supplied to`+` \`${n}\`. Expecting instance of google.maps.Data.`)},t.b=function(e,t,n){return e[t]instanceof google.maps.Polygon?null:new Error(`Invalid prop \`${t}\` supplied to`+` \`${n}\`. Expecting instance of google.maps.Polygon.`)},t.c=function(e,t,n){return'object'==typeof e[t]&&e[t]&&'FeatureCollection'===e[t].type&&Array.isArray(e[t].features)?null:null===e[t]?null:new Error(`Invalid prop \`${t}\` supplied to`+` \`${n}\`. Expecting a GeoJson object`)}},function(e,t,n){'use strict';function o(e,t){var n={};for(var o in e)0<=t.indexOf(o)||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}Object.defineProperty(t,'__esModule',{value:!0});var r=n(0),a=n.n(r),i=n(1),d=n.n(i),s=n(10),l=n.n(s),p=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};const g=(e)=>{let t=e.children,n=o(e,['children']);return Object(r.createElement)('button',p({className:l.a.button},n),t)};g.propTypes={children:d.a.string},g.defaultProps={children:'Button'};n.d(t,'Button',function(){return g});t['default']=g},function(e,t,n){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=n(0),r=n.n(o),a=n(1),i=n.n(a),d=n(12),s=n.n(d),l=n(13),p=n.n(l);class g extends o.Component{constructor(e){super(e),Object.defineProperty(this,'state',{enumerable:!0,writable:!0,value:{open:this.props.openAtStart}}),this.onBlurClose=this.onBlurClose.bind(this),this.toggleOpen=this.toggleOpen.bind(this),this.renderContent=this.renderContent.bind(this)}onBlurClose(){this.setState({open:!1})}toggleOpen(t){t.preventDefault();const e=this.props.children;this.setState({open:!this.state.open&&!!o.Children.count(e)})}renderContent(e){return Object(o.createElement)('div',{className:p.a.dropdownBody},e)}render(){const e=this.state.open;var t=this.props;const n=t.children,r=t.name,a=t.positionRight,i=t.style,d=t.containerStyle;return Object(o.createElement)('div',{className:a?s()(p.a.mlDropdown,p.a.rightPosition):p.a.mlDropdown,style:i},Object(o.createElement)('div',{className:p.a.dropdownContainer,style:d},Object(o.createElement)('div',{className:e?s()(p.a.dropdownButton,p.a.open,'toggle-button'):s()(p.a.dropdownButton,'toggle-button'),tabIndex:'0',onClick:this.toggleOpen},r),e&&this.renderContent(n)))}}g.propTypes={children:i.a.oneOfType([i.a.node,i.a.func,i.a.arrayOf(i.a.node)]).isRequired,name:i.a.string,style:i.a.object,containerStyle:i.a.object},g.defaultProps={name:'Dropdown',style:{},containerStyle:{}};var c=g,u=(e,t,n)=>{e('Dropdown',t).addDecorator(n).add('with required props',()=>Object(o.createElement)(c,{name:'Customize View'},Object(o.createElement)('div',{style:{padding:0,height:250}},' Child Component '))).add('with right positioning prop',()=>Object(o.createElement)(c,{name:'Customize View',positionRight:!0},Object(o.createElement)('div',{style:{padding:20,height:250}},' Child Component '))).add('with default props',()=>Object(o.createElement)(c,null))};n.d(t,'Dropdown',function(){return g}),n.d(t,'DropdownStory',function(){return u});t['default']=c},function(e){e.exports=function(e){var t='undefined'!=typeof window&&window.location;if(!t)throw new Error('fixUrls requires window.location');if(!e||'string'!=typeof e)return e;var n=t.protocol+'//'+t.host,o=n+t.pathname.replace(/\/[^\/]*$/,'/'),r=e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var r=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r))return e;var a;return a=0===r.indexOf('//')?r:0===r.indexOf('/')?n+r:o+r.replace(/^\.\//,''),'url('+JSON.stringify(a)+')'});return r}},function(e,t,n){var o=n(11);'string'==typeof o&&(o=[[e.i,o,'']]);var r,a={hmr:!0};a.transform=r,a.insertInto=void 0;n(4)(o,a);o.locals&&(e.exports=o.locals),!1},function(e,t,n){t=e.exports=n(3)(!1),t.push([e.i,'.rge__styles__button___127GD {\n  outline: none;\n  cursor: pointer;\n  display: inline-block;\n  width: 100%;\n  background: #FFFFFF;\n  border: none;\n  border-bottom: 1px solid #d4d6d8;\n  border-radius: 0;\n  font-size: 13px;\n  line-height: 17px;\n  color: #333333;\n  text-align: left;\n  padding: 10px;\n  position: relative;\n  top: 1px; }\n  .rge__styles__button___127GD:disabled {\n    opacity: 0.5; }\n','']),t.locals={button:'rge__styles__button___127GD'}},function(e){e.exports=require('classnames')},function(e,t,n){var o=n(14);'string'==typeof o&&(o=[[e.i,o,'']]);var r,a={hmr:!0};a.transform=r,a.insertInto=void 0;n(4)(o,a);o.locals&&(e.exports=o.locals),!1},function(e,t,n){t=e.exports=n(3)(!1),t.push([e.i,'.rge__styles__ml-dropdown___1O68P {\n  position: relative;\n  padding-top: 20px;\n  padding-bottom: 20px; }\n\n.rge__styles__ml-dropdown___1O68P.rge__styles__right-position___BH_Jl {\n  display: flex;\n  justify-content: flex-end; }\n\n.rge__styles__ml-dropdown___1O68P .rge__styles__dropdown-container___3Ao7x {\n  position: relative;\n  width: 250px;\n  bottom: 1px; }\n\n.rge__styles__ml-dropdown___1O68P .rge__styles__dropdown-container___3Ao7x .rge__styles__dropdown-button___3C2of {\n  outline: none;\n  cursor: pointer;\n  display: inline-block;\n  width: calc(100% - 20px);\n  height: inherit;\n  background: #FFFFFF;\n  border: none;\n  box-shadow: rgba(0, 0, 0, 0.3) 0px 2px 6px;\n  border-radius: 2px;\n  font-family: \'Noto Sans\', sans-serif;\n  font-size: 13px;\n  line-height: 17px;\n  color: #333333;\n  text-align: left;\n  padding: 10px;\n  position: relative;\n  top: 1px;\n  /* Dropdown box downwards arrow style */ }\n  .rge__styles__ml-dropdown___1O68P .rge__styles__dropdown-container___3Ao7x .rge__styles__dropdown-button___3C2of:after {\n    content: "";\n    width: 0;\n    height: 0;\n    border: 7px solid transparent;\n    border-color: #AAA9AA transparent transparent transparent;\n    position: absolute;\n    top: 16px;\n    right: 10px; }\n  .rge__styles__ml-dropdown___1O68P .rge__styles__dropdown-container___3Ao7x .rge__styles__dropdown-button___3C2of.rge__styles__open___2Zl2x {\n    position: relative;\n    font-weight: bold;\n    border: none;\n    outline: 0; }\n  .rge__styles__ml-dropdown___1O68P .rge__styles__dropdown-container___3Ao7x .rge__styles__dropdown-button___3C2of.rge__styles__open___2Zl2x:after {\n    border-color: #000000 transparent transparent transparent; }\n\n.rge__styles__ml-dropdown___1O68P .rge__styles__dropdown-container___3Ao7x .rge__styles__dropdown-body___1Qb6u {\n  position: absolute;\n  left: 0;\n  margin-top: 2px;\n  width: 100%;\n  background: #FFFFFF;\n  border: none;\n  border-radius: 2px;\n  z-index: 1000;\n  padding: 0;\n  box-shadow: rgba(0, 0, 0, 0.3) 0px 2px 6px; }\n\n.rge__styles__ml-dropdown___1O68P .rge__styles__dropdown-container___3Ao7x .rge__styles__dropdown-main___1oHXz {\n  position: absolute;\n  right: 0;\n  /* must be changed in use */\n  height: 379px;\n  width: 677px;\n  background: #FFFFFF;\n  border: 1px solid #007ABC;\n  border-radius: 2px;\n  display: none;\n  grid-template-columns: 30% 30% 40%;\n  padding-top: 20px;\n  z-index: 1000; }\n  .rge__styles__ml-dropdown___1O68P .rge__styles__dropdown-container___3Ao7x .rge__styles__dropdown-main___1oHXz.rge__styles__open___2Zl2x {\n    display: grid; }\n','']),t.locals={"ml-dropdown":'rge__styles__ml-dropdown___1O68P',mlDropdown:'rge__styles__ml-dropdown___1O68P',"right-position":'rge__styles__right-position___BH_Jl',rightPosition:'rge__styles__right-position___BH_Jl',"dropdown-container":'rge__styles__dropdown-container___3Ao7x',dropdownContainer:'rge__styles__dropdown-container___3Ao7x',"dropdown-button":'rge__styles__dropdown-button___3C2of',dropdownButton:'rge__styles__dropdown-button___3C2of',open:'rge__styles__open___2Zl2x',"dropdown-body":'rge__styles__dropdown-body___1Qb6u',dropdownBody:'rge__styles__dropdown-body___1Qb6u',"dropdown-main":'rge__styles__dropdown-main___1oHXz',dropdownMain:'rge__styles__dropdown-main___1oHXz'}},function(e,t,n){'use strict';(function(e){var o=n(0),r=n.n(o),a=n(1),i=n.n(a),d=n(2),s=n(5),l=n(6),p=n(21),g=n(22),c=n(23);class u extends o.Component{constructor(...e){var t;return t=super(...e),Object.defineProperty(this,'state',{enumerable:!0,writable:!0,value:{controlMode:s.a.VIEW}}),t}render(){var e=this.props;const t=e.center,n=e.zoom,r=e.onSave,a=e.onDelete,i=e.existingPolygons,l=e.mapHeight,u=e.mapWidth,_=this.state.controlMode;return Object(o.createElement)('div',{style:{position:'relative'}},Object(o.createElement)(d.c,{googleMapURL:`https://maps.googleapis.com/maps/api/js?key=${this.props.googleMapKey}&v=3.exp&libraries=geometry,drawing,places`,center:t,zoom:n,height:l,width:u},Object(o.createElement)(d.e,{initialGeojson:i,onSave:r,onDelete:a},Object(o.createElement)(p.a,{mode:_,onToggleMode:(e)=>this.setState({controlMode:e})}),_===s.a.EDIT&&Object(o.createElement)(p.b,null),_===s.a.EDIT?Object(o.createElement)(g.a,null):Object(o.createElement)(c.a,null))))}}t.a=u,t.b=u,u.propTypes={center:i.a.shape({lng:i.a.number,lat:i.a.number}),zoom:i.a.number,googleMapKey:i.a.string,existingPolygons:l.c,onDelete:i.a.func,onSave:i.a.func,mapHeight:i.a.number,mapWidth:i.a.oneOfType([i.a.string,i.a.number])},u.defaultProps={center:{lng:-73.945,lat:40.674},zoom:5,existingPolygons:null,googleMapKey:e.env.GOOGLE_MAP_KEY,mapHeight:500,mapWidth:'100%',onDelete:()=>{},onSave:()=>{}}}).call(t,n(17))},function(e,t,n){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var o=n(15),r=n(2);n.d(t,'GoogleMap',function(){return r.a}),n.d(t,'GeoJsonEditor',function(){return o.a}),t['default']=o.b},function(e){function t(){throw new Error('setTimeout has not been defined')}function n(){throw new Error('clearTimeout has not been defined')}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===t||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function r(e){if(p===clearTimeout)return clearTimeout(e);if((p===n||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function a(){_&&c&&(_=!1,c.length?u=c.concat(u):m=-1,u.length&&d())}function d(){if(!_){var e=o(a);_=!0;for(var t=u.length;t;){for(c=u,u=[];++m<t;)c&&c[m].run();m=-1,t=u.length}c=null,_=!1,r(e)}}function s(e,t){this.fun=e,this.array=t}function i(){}var l,p,g=e.exports={};(function(){try{l='function'==typeof setTimeout?setTimeout:t}catch(n){l=t}try{p='function'==typeof clearTimeout?clearTimeout:n}catch(t){p=n}})();var c,u=[],_=!1,m=-1;g.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new s(e,t)),1!==u.length||_||o(d)},s.prototype.run=function(){this.fun.apply(null,this.array)},g.title='browser',g.browser=!0,g.env={},g.argv=[],g.version='',g.versions={},g.on=i,g.addListener=i,g.once=i,g.off=i,g.removeListener=i,g.removeAllListeners=i,g.emit=i,g.prependListener=i,g.prependOnceListener=i,g.listeners=function(){return[]},g.binding=function(){throw new Error('process.binding is not supported')},g.cwd=function(){return'/'},g.chdir=function(){throw new Error('process.chdir is not supported')},g.umask=function(){return 0}},function(e){e.exports=require('scriptjs')},function(e){e.exports=require('@turf/difference')},function(e){e.exports=require('@turf/area')},function(e,t,n){'use strict';function o({children:e}){return Object(r.createElement)('div',{style:c({},_,{textAlign:'center'})},e)}var r=n(0),a=n.n(r),i=n(1),d=n.n(i),s=n(5),l=n(8),p=n(7),g=n(2),c=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};class u extends r.Component{constructor(...e){var t;return t=super(...e),Object.defineProperty(this,'gmapControls',{enumerable:!0,writable:!0,value:null}),Object.defineProperty(this,'gmapControl',{enumerable:!0,writable:!0,value:null}),Object.defineProperty(this,'controlId',{enumerable:!0,writable:!0,value:`gmap-control-${Math.random().toFixed(5).replace('0.','')}`}),Object.defineProperty(this,'controlRef',{enumerable:!0,writable:!0,value:a.a.createRef()}),t}componentDidMount(){var e=this.context;const t=e.map,n=e.google;this.gmapControls=t.controls[n.maps.ControlPosition.TOP_RIGHT],this.gmapControl=this.controlRef.current.firstChild,this.gmapControls.push(this.gmapControl)}componentWillUnmount(){const e=this.gmapControls.indexOf(this.gmapControl);0<=e&&this.gmapControls.removeAt(e)}render(){const e=this.props.children;return Object(r.createElement)('div',{ref:this.controlRef,style:{display:'none'}},Object(r.createElement)('div',{id:this.controlId},Object(r.createElement)(o,null,e)))}}Object.defineProperty(u,'contextType',{enumerable:!0,writable:!0,value:g.b});const _={backgroundColor:'#fff',border:'none',borderRadius:'0',boxShadow:'none',cursor:'pointer',marginTop:'10px',marginRight:'10px',marginBottom:'22px'},m=({mode:e,onToggleMode:t})=>Object(r.createElement)(u,{title:'Managing geojson changes'},e===s.a.VIEW?Object(r.createElement)(p.Button,{onClick:()=>t(s.a.EDIT),style:{width:120,boxShadow:'rgba(0, 0, 0, 0.3) 0px 2px 6px',borderRadius:2},title:'Turn on Edit mode'},'Create / Edit'):Object(r.createElement)(l.Dropdown,{name:'Changes',openAtStart:!0,style:{padding:0},containerStyle:{width:120}},Object(r.createElement)(g.d.Consumer,null,({discardChanges:e,persistChanges:n})=>Object(r.createElement)('div',{style:{padding:0},title:'GeoJsonControls'},Object(r.createElement)(p.Button,{onClick:(e)=>{n(e,()=>t(s.a.VIEW))},title:'Save changes'},'Save'),Object(r.createElement)(p.Button,{onClick:(n)=>e(n,()=>t(s.a.VIEW)),title:'Discard changes'},'Cancel')))));m.propTypes={mode:d.a.string,onToggleMode:d.a.func},m.defaultProps={mode:s.a.VIEW,onToggleMode:()=>{}};var y=()=>Object(r.createElement)(u,{title:'Managing polygon edits'},Object(r.createElement)(g.d.Consumer,null,({selectedPolygonList:e,subtractAction:t,deleteAction:n})=>{const o=e.length;return Object(r.createElement)(l.Dropdown,{name:`${o} Selected`,style:{padding:0},containerStyle:{width:120}},Object(r.createElement)('div',{style:{padding:0},title:'EditorControls'},Object(r.createElement)(p.Button,{disabled:2>o,onClick:t,title:'Make Hollow'},'Subtract'),Object(r.createElement)(p.Button,{disabled:0>=o,onClick:n},'Delete')))}));n.d(t,'a',function(){return m}),n.d(t,'b',function(){return y})},function(e,t,n){'use strict';function o(e,{onSelect:t,onUnSelect:n}){e.addListener('click',()=>{console.log('addListener',e),e.setEditable(!e.getEditable()),e.getEditable()?t(e):n(e)})}function r(e,{google:t}){t.maps.event.clearInstanceListeners(e)}var a=n(0),i=n.n(a),d=n(2);class s extends a.Component{constructor(...e){var t;return t=super(...e),Object.defineProperty(this,'drawingManager',{enumerable:!0,writable:!0,value:null}),t}componentDidMount(){var e=this.context;const t=e.map,n=e.google,o=this.props.onCreate;this.drawingManager=new n.maps.drawing.DrawingManager({drawingMode:n.maps.drawing.OverlayType.POLYGON,drawingControl:!0,drawingControlOptions:{position:n.maps.ControlPosition.TOP_CENTER,drawingModes:[n.maps.drawing.OverlayType.POLYGON]},polygonOptions:{fillColor:'#455A64',fillOpacity:0.3,strokeColor:'#455A64',strokeWeight:3,clickable:!0,editable:!0,zIndex:1}}),this.drawingManager.addListener('polygoncomplete',(e)=>{e.setMap(null),o(e)}),this.drawingManager.setMap(t)}componentDidUpdatesaved(){var e=this.context;const t=e.map,n=e.google,o=this.props.onCreate;this.drawingManager=new n.maps.drawing.DrawingManager({drawingMode:n.maps.drawing.OverlayType.POLYGON,drawingControl:!0,drawingControlOptions:{position:n.maps.ControlPosition.TOP_CENTER,drawingModes:[n.maps.drawing.OverlayType.POLYGON]},polygonOptions:{fillColor:'#455A64',fillOpacity:0.3,strokeColor:'#455A64',strokeWeight:3,clickable:!0,editable:!0,zIndex:1}}),this.drawingManager.addListener('polygoncomplete',(e)=>{e.setMap(null),o(e)}),this.drawingManager.setMap(t)}componentWillUnmount(){this.drawingManager.setMap(null)}render(){return null}}Object.defineProperty(s,'contextType',{enumerable:!0,writable:!0,value:d.b});var l=n(1),p=n.n(l),g=n(6);class c extends a.Component{constructor(e,t){super(e,t)}componentDidMount(){const e=this.context.map;var t=this.props;const n=t.onSelect,r=t.onUnSelect,a=t.polygons,i=t.newPolygonList;a.forEach((t)=>{o(t,{onSelect:n,onUnSelect:r}),t.setMap(e)}),i.forEach((t)=>{o(t,{onSelect:n,onUnSelect:r}),t.setMap(e)})}componentDidUpdate(e){const t=this.context.map;var n=this.props;const a=n.onSelect,i=n.onUnSelect,d=n.polygons,s=n.newPolygonList;e.polygons.forEach((e)=>{r(e,this.context),e.setMap(null)}),e.newPolygonList.forEach((e)=>{r(e,this.context),e.setMap(null)}),d.forEach((e)=>{o(e,{onSelect:a,onUnSelect:i}),e.setMap(t)}),s.forEach((e)=>{o(e,{onSelect:a,onUnSelect:i}),e.setMap(t)})}componentWillUnmount(){this.props.polygons.forEach((e)=>{r(e,this.context),e.setMap(null)}),this.props.newPolygonList.forEach((e)=>{r(e,this.context),e.setMap(null)})}render(){return null}}Object.defineProperty(c,'contextType',{enumerable:!0,writable:!0,value:d.b}),Object.defineProperty(c,'propTypes',{enumerable:!0,writable:!0,value:{polygons:p.a.arrayOf(g.b),newPolygonList:p.a.arrayOf(g.b),onMount:p.a.func,onSelect:p.a.func,onUnSelect:p.a.func}}),Object.defineProperty(c,'defaultProps',{enumerable:!0,writable:!0,value:{polygons:[],newPolygonList:[]}});var u=()=>Object(a.createElement)(d.d.Consumer,null,({newPolygonList:e,polygonList:t,selectPolygon:n,unSelectPolygon:o,addNewPolygon:r})=>Object(a.createElement)(i.a.Fragment,null,Object(a.createElement)(s,{onCreate:r}),Object(a.createElement)(c,{newPolygonList:e,polygons:t,onSelect:n,onUnSelect:o})));n.d(t,'a',function(){return u})},function(e,t,n){'use strict';var o=n(0),r=n.n(o),a=n(1),i=n.n(a),d=n(2),s=n(6);class l extends o.Component{componentDidMount(){if(!this.props.gmapData)return;const e=this.context.map;this.props.gmapData.setMap(e),this.props.newPolygonList.forEach((t)=>t.setMap(e))}componentDidUpdate(e){const t=this.context.map;var n=this.props;const o=n.gmapData,r=n.newPolygonList;e.gmapData!==o&&(e.gmapData&&e.gmapData.setMap(null),o&&o.setMap(t)),e.newPolygonList!==r&&(e.newPolygonList.forEach((e)=>e.setMap(null)),r.forEach((e)=>e.setMap(t)))}componentWillUnmount(){var e=this.props;const t=e.gmapData,n=e.newPolygonList;t&&t.setMap(null),n.forEach((e)=>e.setMap(null))}render(){return null}}Object.defineProperty(l,'contextType',{enumerable:!0,writable:!0,value:d.b}),Object.defineProperty(l,'propTypes',{enumerable:!0,writable:!0,value:{gmapData:s.a,newPolygonList:i.a.arrayOf(s.b)}}),Object.defineProperty(l,'defaultProps',{enumerable:!0,writable:!0,value:{gmapData:null,newPolygonList:[]}});var p=()=>Object(o.createElement)(d.d.Consumer,null,({gmapData:e,newPolygonList:t})=>Object(o.createElement)(l,{newPolygonList:t,gmapData:e}));n.d(t,'a',function(){return p})},,,function(e,t,n){e.exports=n(16)}])});
//# sourceMappingURL=GeoJsonEditor.js.map